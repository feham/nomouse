<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>Canvas tutorial</title>
    <script>
      var x0 = 10;
      var x1 = 840;
      var y0 = 10;
      var y1 = 740;
      var xt = 200;
      var yt = 200;
      function redraw() {
	  var canvas = document.getElementById('tutorial');
          if (canvas.getContext) {
              var ctx = canvas.getContext('2d');
	      ctx.clearRect(0,0,canvas.width,canvas.height);
	      ctx.strokeStyle = 'green';
	      ctx.strokeRect(x0, y0, x1-x0, y1-y0);
	      ctx.strokeStyle = 'red';
	      ctx.strokeRect(xt-2, yt-2, 4, 4);
          }
      }
      function draw() {
	  console.log("in draw");
	  var canvas = document.getElementById('tutorial');
	  canvas.addEventListener('mousedown', function(event) {
	      //alert('mousedown');
	      console.log('mousedown');
          }, false);
	  canvas.addEventListener('keydown', function(event) {
	      //alert('keydown: '+event.keyCode);
	      console.log('keydown: '+event.keyCode);
	      if (event.keyCode == 65) {
		  x1 = (x0+x1)/2;
	      }
	      else if (event.keyCode == 68) {
		  x0 = (x0+x1)/2;
	      }
	      else if (event.keyCode == 83) {
		  y0 = (y0+y1)/2;
	      }
	      else if (event.keyCode == 87) {
		  y1 = (y0+y1)/2;
	      }
	      else if (event.keyCode == 32) {
		  x0 = 10;
		  x1 = 840;
		  y0 = 10;
		  y1 = 740;
		  xt = x0 + Math.random()*(x1-x0);
		  yt = y0 + Math.random()*(y1-y0);		  
	      }
	      redraw();
          }, false);
	  redraw();
      }
    </script>
    <style>
      canvas { border: 1px solid black; }
    </style>
  </head>
  <body onload="draw();">
    <canvas id="tutorial" tabindex='1' width="850" height="750"></canvas>
  </body>
</html>
